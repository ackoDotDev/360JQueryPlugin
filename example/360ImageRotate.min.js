!function(m){m.fn.TreeSixtyImageRotate=function(e){var u=this,d=m.extend({totalFrames:36,endFrame:36,currentFrame:0,speed:50,progress:".spinner",extension:".jpg",imgPrefix:"",navigation:!0,spinner:!0,imagesFolder:"images/",smallWidth:400,smallHeight:400,largeWidth:800,largeHeight:800,imagePlaceholderClass:"images-placeholder",imgList:"threesixty-images-rotate"},e);return u.initTreeSixty=function(){u.css({height:d.smallHeight,width:d.smallWidth,position:"relative",margin:"auto"}),d.spinner&&u.spinner("start"),this.loadImages(),d.navigation&&u.createNavigation();var t,n,i=!1;u.find(".images-list").on("mousedown touchstart",function(e){e.preventDefault(),t="mousedown"===e.type?e.pageX:e.originalEvent.touches[0].pageX,i=!0}).on("mousemove touchmove",function(e){i&&(n="mousemove"===e.type?e.pageX:e.originalEvent.touches[0].pageX,t<n?(!0,t=n,u.previous()):(!0,t=n,u.next()))}).on("mouseleave mouseup touchend",function(e){i=!1}),d.spinner&&u.spinner("stop")},u.loadImages=function(){var e,t,n,i;e=m("<div/>").attr({class:"images-display"}),t=m("<ul/>").attr({class:"images-list"});for(var a=0;a<d.totalFrames+1;a++)n=m("<li/>").attr({class:"images-display image-"+a+(0===a?" active":"")}),i=m("<img/>").attr({src:d.imagesFolder+d.imgPrefix+a+d.extension}),n.append(i),t.append(n);e.append(t),u.append(e)},u.createNavigation=function(){var e,t,n,i,a,s,l,r;e=m("<div/>").attr("class","navigation-bar-wrapper"),t=m("<div/>").attr("class","navigation-bar"),n=m("<div/>").attr({class:"navigation-bar-next"}),i=m("<div/>").attr({class:"navigation-bar-previous"}),a=m("<div/>").attr({class:"navigation-bar-play"}),s=m("<div/>").attr({class:"navigation-bar-resize"}),t.append(i),t.append(a),t.append(n),t.append(s),e.append(t),u.append(e),n.on("mousedown touchstart",function(e){e.preventDefault(),l=setInterval(function(){u.next()},d.speed)}).on("mouseleave mouseup touchend",function(){clearInterval(l)}),i.on("mousedown touchstart",function(e){e.preventDefault(),r=setInterval(function(){u.previous()},d.speed)}).on("mouseleave mouseup touchend",function(){clearInterval(r)});var o,c=!1;a.on("mousedown touchstart",function(e){e.preventDefault(),c?(u.find(".navigation-bar-play").removeClass("navigation-bar-stop"),c=!1,clearInterval(o)):(u.find(".navigation-bar-play").addClass("navigation-bar-stop"),c=!0,o=setInterval(function(){u.next()},d.speed))}),s.on("mousedown touchstart",function(e){e.preventDefault(),u.togleFullScreen()})},u.spinner=function(e){var t;if(t=m("<div/>").attr({class:"loading-spinner"}),u.append(t),"start"===e){var n=m(window).width();991<n?u.find(".loading-spinner").css({height:d.smallHeight,width:d.smallWidth}):u.find(".loading-spinner").css({"max-height":d.largeHeight,"max-width":d.largeWidth,height:n,width:n})}else"stop"===e?u.find(".loading-spinner").css({display:"none"}):console.log("Invalid status for spinner")},u.next=function(){var e=u.find(".active"),t=e.attr("class").split(/\s+/)[1],n=parseInt(t.substring(6));--n<0&&(n=d.totalFrames);var i="image-"+n;u.find("."+i).addClass("active"),e.removeClass("active")},u.previous=function(){var e=u.find(".active"),t=e.attr("class").split(/\s+/)[1],n=parseInt(t.substring(6));++n>d.totalFrames&&(n=0);var i="image-"+n;u.find("."+i).addClass("active"),e.removeClass("active")},u.togleFullScreen=function(){m(document)[0].fullscreenElement||m(document)[0].mozFullScreenElement||m(document)[0].webkitFullscreenElement||m(document)[0].msFullscreenElement?m(document)[0].exitFullscreen?m(document)[0].exitFullscreen():m(document)[0].msExitFullscreen?m(document)[0].msExitFullscreen():m(document)[0].mozCancelFullScreen?m(document)[0].mozCancelFullScreen():m(document)[0].webkitExitFullscreen&&m(document)[0].webkitExitFullscreen():m(this)[0].requestFullscreen?m(this)[0].requestFullscreen():m(this)[0].msRequestFullscreen?m(this)[0].msRequestFullscreen():m(this)[0].mozRequestFullScreen?m(this)[0].mozRequestFullScreen():m(this)[0].webkitRequestFullscreen&&m(this)[0].webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},u.resize=function(){u.find(".navigation-bar-resize").toggleClass("navigation-bar-resize-small-icon"),m(document)[0].fullscreenElement||m(document)[0].mozFullScreenElement||m(document)[0].webkitFullscreenElement||m(document)[0].msFullscreenElement?u.find(".images-display").css({height:d.largeHeight,width:d.largeWidth,margin:"auto"}):u.find(".images-display").css({height:"100%",width:"100%",margin:"auto"})},u.on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(e){u.resize()}),m(window).resize(function(e){var t=m(window).width();991<t?u.css({height:d.smallHeight,width:d.smallWidth}):u.css({"max-height":d.largeHeight,"max-width":d.largeWidth,height:t,width:t})}),m(document).ready(function(e){var t=m(window).width();991<t?u.css({height:d.smallHeight,width:d.smallWidth}):u.css({"max-height":d.largeHeight,"max-width":d.largeWidth,height:t,width:t})}),u}}(jQuery);